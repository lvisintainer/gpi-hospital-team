<header class="topbar">
  <div class="topbar__title">ğŸ¥ Ticketing Desk</div>

  <div class="topbar__spacer"></div>

  <nav class="topbar__nav">
    <span class="nav-item">ğŸ“‹ Lista pazienti</span>
    <span class="nav-item">ğŸ‘¨â€âš•ï¸ Medici</span>
    <span class="nav-item">ğŸ“Š Statistiche</span>
    <span class="nav-item">ğŸ›ï¸ Reparti</span>
    <span class="nav-item">âš™ï¸ Impostazioni</span>
  </nav>
</header>


<section class="toolbar">
  <button (click)="api.getListaPazienti()">ğŸ”„ Aggiorna lista</button>
  <button routerLink="/accetta-pz">â• Accetta nuovo paziente</button>
</section>

<section class="pz-list">
  <article *ngFor="let pz of api.listaPz(); trackBy: trackById" class="pz-card">
    <header>
      <div class="pz-avatar">ğŸ§</div>
      <div class="pz-info">
        <h3>{{ pz.cognome }} {{ pz.nome }}</h3>
        <small>ğŸ“… {{ pz.data_nascita | date: 'dd/MM/yyyy' }}</small>
      </div>
    </header>

    <div class="pz-meta">
      <p><strong>ğŸ†” Codice:</strong> {{ pz.codice }}</p>
      <p><strong>ğŸ§¾ CF:</strong> {{ pz.codice_fiscale }}</p>
      <p><strong>ğŸ¥ Reparto:</strong> {{ pz.nome_reparto || 'â€”' }}</p>
    </div>

    <div class="pz-status">
      <span class="badge colore-{{ pz.codice_colore.toLowerCase() }}">{{ pz.codice_colore }}</span>
      <span class="badge stato">ğŸ“Œ {{ pz.stato }}</span>
    </div>

    <footer class="pz_card__action">
      <button (click)="api.traferisciPaziente(pz.id_paziente)">ğŸš‘ Trasferisci</button>
      <button (click)="api.dimettiPaziente(pz.id_paziente)">ğŸ  Dimetti</button>
    </footer>
  </article>

  <h3 *ngIf="api.listaPz().length === 0" class="no-results">ğŸ›ˆ Nessun paziente attualmente presente</h3>
</section>
